from PyQt5.QtWidgets import QWidget, QVBoxLayout, QLabel, QPushButton
from PyQt5.QtCore import Qt


class AlgorithmPage(QWidget):
    def __init__(self, main_window):
        super().__init__()
        self.main_window = main_window

        layout = QVBoxLayout()

        title = QLabel("АЛГОРИТМ РАБОТЫ ПРОГРАММЫ")
        title.setAlignment(Qt.AlignCenter)

        text = QLabel(
            "<b>Инструкция пользователю</b><br><br>"
            "<b>1. Задание параметров системы</b><br>"
            "• В левой части окна задайте материальные, геометрические параметры и параметры трения.<br>"
            "• Единицы измерения указаны в подписях к полям (Па, м, кг/м³ и т.д.).<br>"
            "• При необходимости можно сохранить/загрузить набор параметров через кнопки внизу панели.<br><br>"
            "<b>2. Анализ крутильных колебаний</b><br>"
            "• Выберите вкладку «Крутильные».<br>"
            "• Нажмите кнопку «Выполнить анализ».<br>"
            "• На графике строится кривая D-разбиения σ(p). Красная точка — пересечение Im(σ)=0.<br>"
            "• Численные значения ω*, Re(σ(ω*)) и f* выводятся в блоке «Точка пересечения» слева.<br><br>"
            "<b>3. Анализ продольных и поперечных колебаний</b><br>"
            "• Перейдите на вкладку «Продольные» или «Поперечные».<br>"
            "• Нажмите «Выполнить анализ» — построятся соответствующие кривые K₁–δ или годограф W(p).<br><br>"
            "<b>4. Диаграмма устойчивости по δ₁</b><br>"
            "• Перейдите на вкладку «Диаграмма устойчивости».<br>"
            "• Нажмите «Построить диаграмму устойчивости».<br>"
            "• По оси X откладываются значения δ₁ (с учётом множителя), по оси Y — Re(σ(ω*)).<br><br>"
            "<b>5. Интерактивный режим</b><br>"
            "• Нажмите кнопку «Интерактивный режим».<br>"
            "• В открывшемся окне на вкладках можно изменять L, δ₁, μ, τ, K с помощью слайдеров.<br>"
            "• Графики обновляются автоматически при изменении параметров.<br><br>"
            "<b>6. Экспорт результатов</b><br>"
            "• Нажмите «Экспорт результатов», выберите формат (JSON или CSV) и имя файла.<br>"
            "• В файл сохраняются параметры системы и рассчитанные кривые для крутильных и продольных колебаний.<br>"
        )
        text.setAlignment(Qt.AlignLeft)

        back_btn = QPushButton("Назад в меню")
        back_btn.clicked.connect(
            lambda: main_window.switch(main_window.menu)
        )

        layout.addWidget(title)
        layout.addWidget(text)
        layout.addWidget(back_btn)
        layout.addStretch()

        self.setLayout(layout)